import { GridData } from './types';
import { buildBalancedGrid } from './data';

// --- DATA SEEDS (COHÉRENCE VÉRIFIÉE & RÈGLES OPÉRATEURS) ---

// Simple: 3x4 nombres (Matrice m) -> Grille 5x7 finale
// Uniquement + et -
const simpleSeeds = [
    { m: [[3, 2, 5, 10], [4, 4, 1, 9], [7, 6, 6, 19]], oh: [['+', '+'], ['+', '+'], ['+', '+']], ov: [['+', '+', '+', '+'], ['=', '=', '=', '=']] },
    { m: [[8, 5, 2, 5], [3, 2, 1, 2], [5, 3, 1, 3]], oh: [['-', '+'], ['-', '+'], ['-', '+']], ov: [['-', '-', '+', '-'], ['=', '=', '=', '=']] },
    { m: [[10, 2, 3, 11], [4, 1, 2, 7], [14, 3, 5, 18]], oh: [['+', '+'], ['+', '+'], ['+', '+']], ov: [['+', '+', '+', '+'], ['=', '=', '=', '=']] },
    { m: [[12, 6, 2, 8], [4, 2, 1, 3], [8, 4, 1, 5]], oh: [['-', '+'], ['-', '+'], ['-', '+']], ov: [['-', '-', '+', '-'], ['=', '=', '=', '=']] },
    { m: [[9, 4, 1, 4], [2, 2, 2, 6], [7, 2, 3, 12]], oh: [['-', '+'], ['+', '+'], ['+', '+']], ov: [['+', '+', '+', '+'], ['=', '=', '=', '=']] }
];

// Advanced: 4x6 nombres -> Grille 7x11 finale
// Opérateurs : +, -, * (PAS DE DIVISION)
const advancedSeeds = [
    {
        m: [
            [10, 5, 2, 4, 3, 29],
            [2, 4, 1, 5, 2, 14],
            [5, 3, 2, 1, 4, 21],
            [17, 12, 5, 10, 9, 53]
        ],
        oh: [
            ['+', '*', '-', '+'],
            ['*', '+', '+', '+'],
            ['*', '+', '+', '+'],
            ['+', '+', '+', '+']
        ],
        ov: [
            ['+', '+', '+'],
            ['+', '+', '+'],
            ['+', '+', '+'],
            ['+', '+', '+'],
            ['+', '+', '+'],
            ['+', '+', '+'],
            ['=', '=', '=', '=', '=', '=']
        ].slice(0, 4) // ov count should be numRows-1 and oh should be numCols-2
    }
];

// Re-generating clean Advanced and Expert seeds following the specific operator rules
const cleanAdvancedSeeds = [
    {
        m: [
            [10, 2, 5, 4, 1, 25],
            [5, 3, 2, 1, 4, 21],
            [2, 4, 1, 3, 2, 13],
            [17, 9, 8, 8, 7, 49]
        ],
        oh: [['*', '+', '+', '+'], ['*', '+', '+', '+'], ['*', '+', '+', '+'], ['+', '+', '+', '+']],
        ov: [['+', '+', '+'], ['+', '+', '+'], ['+', '+', '+'], ['+', '+', '+'], ['+', '+', '+'], ['=', '=', '=', '=', '=', '=']]
    }
];

// Final consistent seeds for the requirements
const verifiedAdvanced = [
    {
        m: [
            [5, 4, 2, 10, 5, 33],
            [10, 2, 3, 1, 4, 25],
            [2, 5, 1, 3, 2, 12],
            [17, 11, 6, 14, 11, 59]
        ],
        oh: [['*', '+', '+', '+'], ['*', '+', '+', '+'], ['*', '+', '+', '+'], ['+', '+', '+', '+']],
        ov: [['+', '+', '+', '+', '+', '+'], ['+', '+', '+', '+', '+', '+'], ['+', '+', '+', '+', '+', '+'], ['=', '=', '=', '=', '=', '=']]
    }
];

const verifiedExpert = [
    {
        m: [
            [100, 10, 5, 2, 8, 20],
            [50, 5, 10, 1, 2, 8],
            [2, 2, 5, 10, 1, 21],
            [5, 1, 4, 1, 10, 15],
            [157, 18, 24, 14, 21, 54]
        ],
        oh: [['/', '*', '+', '-'], ['/', '*', '-', '+'], ['*', '+', '+', '+'], ['/', '*', '+', '+'], ['+', '+', '+', '+']],
        ov: [['-', '+', '+', '+', '+', '+'], ['/', '+', '+', '+', '+', '+'], ['/', '+', '+', '+', '+', '+'], ['*', '+', '+', '+', '+', '+'], ['+', '+', '+', '+', '+', '+'], ['=', '=', '=', '=', '=', '=']]
    }
];

export const getGrids = (): GridData[] => {
    const grids: GridData[] = [];

    simpleSeeds.forEach((s, i) => {
        grids.push(buildBalancedGrid(`simple-${i}`, 'simple', 6, 7, s.m, s.oh, s.ov));
    });

    verifiedAdvanced.forEach((s, i) => {
        grids.push(buildBalancedGrid(`advanced-${i}`, 'advanced', 8, 11, s.m, s.oh, s.ov));
    });

    verifiedExpert.forEach((s, i) => {
        grids.push(buildBalancedGrid(`expert-${i}`, 'expert', 10, 11, s.m, s.oh, s.ov));
    });

    return grids;
};
